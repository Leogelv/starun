# Библиотека практик: Детальное описание флоу

## Общая схема работы библиотеки

1. **Главная страница библиотеки**
   - Отображает основные категории практик
   - Позволяет быстро найти популярные материалы
   - Включает поисковую функцию
   - Отображает сохраненные избранные практики

2. **Навигация по разделам**
   - Категории практик (Тело, Медитация, Дыхание, База)
   - Избранное
   - Поиск по ключевым словам
   - Фильтрация по тегам

3. **Просмотр материалов**
   - Воспроизведение видео и аудио
   - Чтение описаний
   - Сохранение в избранное
   - Переход к практике

## Детальные экраны библиотеки

### Главный экран библиотеки
1. **Заголовок и навигация**
   - Название раздела "Библиотека"
   - Верхний навигационный бар
   - Нижний таб-бар для переключения между основными разделами

2. **Категории практик**
   - Блоки с основными категориями:
     - Тело
     - Медитация
     - Дыхание
     - База
   - Визуальное оформление категорий с иконками

3. **Быстрый доступ**
   - Кнопка "Избранное"
   - Секция "Рекомендуемые практики"
   - Поиск по библиотеке

### Экран категории "Медитация"
1. **Структура экрана**
   - Заголовок "Медитация"
   - Панель навигации с возможностью возврата
   - Поиск по категории

2. **Список материалов**
   - Карточки с медитациями
   - Превью и краткое описание
   - Длительность практики
   - Кнопка добавления в избранное

3. **Фильтрация**
   - Теги для фильтрации типов медитаций
   - Сортировка по длительности, популярности

4. **Дополнительная информация**
   - Кнопка "О направлении" с описанием медитативных практик

### Экран категории "Тело"
1. **Структура экрана**
   - Заголовок "Тело"
   - Панель навигации с возможностью возврата
   - Поиск по категории

2. **Список материалов**
   - Карточки с телесными практиками
   - Превью и краткое описание
   - Длительность практики
   - Уровень сложности

3. **Фильтрация**
   - Теги для фильтрации типов телесных практик
   - Сортировка по частям тела, интенсивности

4. **Информация о направлении**
   - Описание телесных практик и их пользы

### Экран категории "Дыхание"
1. **Структура экрана**
   - Заголовок "Дыхание"
   - Панель навигации с возможностью возврата
   - Поиск по категории

2. **Список материалов**
   - Карточки с дыхательными техниками
   - Превью и краткое описание
   - Длительность практики
   - Цель дыхательной техники

3. **Фильтрация**
   - Теги для фильтрации дыхательных техник
   - Сортировка по цели, длительности

### Экран "Избранное"
1. **Структура экрана**
   - Заголовок "Избранное"
   - Список сохраненных практик
   - Возможность удаления из избранного

2. **Организация материалов**
   - Группировка по категориям
   - Отображение последних добавленных материалов
   - Быстрый доступ к избранным практикам

### Экран "О направлении"
1. **Структура экрана**
   - Заголовок "О направлении"
   - Детальное описание выбранного направления
   - Описание пользы и эффектов
   - Рекомендации по практике

## Режимы воспроизведения

### Видео-плеер
1. **Структура экрана**
   - Название практики
   - Видео с инструкциями
   - Описание практики
   - Длительность (отображение таймера)

2. **Элементы управления**
   - Кнопка паузы/воспроизведения
   - Прогресс-бар
   - Индикатор длительности
   - Кнопка возврата в библиотеку
   - Кнопка "Другая практика"

3. **Дополнительные функции**
   - Добавление в избранное
   - Скачивание для офлайн-просмотра (если доступно)
   - Режим полного экрана

### Аудио-плеер
1. **Структура экрана**
   - Название медитации/практики
   - Визуальное сопровождение (фоновое изображение)
   - Прогресс-бар
   - Описание практики

2. **Элементы управления**
   - Кнопка паузы/воспроизведения
   - Индикатор длительности
   - Регулировка громкости
   - Кнопка возврата в библиотеку

## Логика работы с Supabase

1. **Структура данных**
   - Таблица materials для хранения всех практик:
     - id (уникальный идентификатор)
     - title (название практики)
     - description (описание)
     - type (тип: видео, аудио)
     - category (категория: тело, медитация, дыхание, база)
     - duration (длительность в минутах)
     - difficulty_level (уровень сложности)
     - tags (массив тегов)
     - content_url (ссылка на видео/аудио)
     - thumbnail_url (ссылка на превью)
     - created_at (дата добавления)

2. **Избранное**
   - Таблица favorites для связи пользователя с избранными материалами:
     - user_id (id пользователя)
     - material_id (id материала)
     - added_at (дата добавления в избранное)

3. **Запросы к базе данных**
   - Получение списка материалов по категории
   - Фильтрация по тегам и другим параметрам
   - Поиск по ключевым словам
   - Сохранение/удаление материалов из избранного

## Интеграция с другими разделами

1. **Связь с профилем**
   - Отслеживание пройденных материалов
   - Рекомендации на основе истории просмотров

2. **Связь с квизом**
   - Предложение соответствующих материалов по результатам квиза
   - Быстрый переход к рекомендованным практикам

3. **Связь с календарем**
   - Добавление практик в календарь
   - Планирование регулярных практик

## Система уведомлений

1. **Завершение практики**
   - Уведомление после завершения практики
   - Предложение оценить практику
   - Предложение добавить в избранное

2. **Мотивационные уведомления**
   - Напоминание о продолжении практик
   - Поздравление с достижением нового уровня
   - Уведомление о длительном отсутствии практик 